<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAPS 등급 계산기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
        <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">PAPS 등급 계산기</h1>
        <p class="text-center text-gray-600 mb-8">학년, 성별, 종목, 기록을 입력하여 등급을 확인하세요.</p>
        
        <form id="papsForm" class="space-y-6">
            <div>
                <label for="grade" class="block text-sm font-medium text-gray-700 mb-1">학년</label>
                <select id="grade" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border-2">
                    <option value="초4">초등학교 4학년</option>
                    <option value="초5">초등학교 5학년</option>
                    <option value="초6">초등학교 6학년</option>
                    <option value="중1">중학교 1학년</option>
                    <option value="중2">중학교 2학년</option>
                    <option value="중3">중학교 3학년</option>
                    <option value="고1">고등학교 1학년</option>
                    <option value="고2">고등학교 2학년</option>
                    <option value="고3">고등학교 3학년</option>
                </select>
            </div>
            
            <div>
                <label for="gender" class="block text-sm font-medium text-gray-700 mb-1">성별</label>
                <select id="gender" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border-2">
                    <option value="남">남학생</option>
                    <option value="여">여학생</option>
                </select>
            </div>
            
            <div>
                <label for="event" class="block text-sm font-medium text-gray-700 mb-1">종목</label>
                <select id="event" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border-2">
                    <option value="왕복오래달리기">심폐지구력 - 왕복오래달리기</option>
                    <option value="오래달리기걷기">심폐지구력 - 오래달리기 걷기</option>
                    <option value="스텝검사">심폐지구력 - 스텝검사 (PEI)</option>
                    <option value="앉아윗몸앞으로굽히기">유연성 - 앉아 윗몸 앞으로 굽히기</option>
                    <option value="종합유연성">유연성 - 종합유연성</option>
                    <option value="팔굽혀펴기">근력/근지구력 - 팔굽혀펴기</option>
                    <option value="윗몸말아올리기">근력/근지구력 - 윗몸 말아올리기</option>
                    <option value="악력">근력/근지구력 - 악력</option>
                    <option value="50m달리기">순발력 - 50m 달리기</option>
                    <option value="제자리멀리뛰기">순발력 - 제자리 멀리뛰기</option>
                    <option value="BMI">비만 - 체질량 지수(BMI)</option>
                </select>
            </div>

            <div id="recordInputContainer">
                <label for="record" class="block text-sm font-medium text-gray-700 mb-1">기록 입력</label>
                <input type="number" id="record" step="0.01" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border-2" placeholder="기록을 입력하세요">
            </div>

            <button type="button" id="calculateBtn" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200">
                등급 확인
            </button>
        </form>

        <div id="resultContainer" class="mt-8 text-center bg-gray-50 p-6 rounded-lg border-dashed border-2 border-gray-300 hidden">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">결과</h3>
            <p id="resultText" class="text-2xl font-bold text-blue-600"></p>
        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900">알림</h3>
                <div class="mt-2 px-7 py-3">
                    <p id="modalMessage" class="text-sm text-gray-500">모든 항목을 입력해주세요.</p>
                </div>
                <div class="items-center px-4 py-3">
                    <button id="closeModal" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200">
                        닫기
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const gradeRanges = {
            '초4': 1, '초5': 2, '초6': 3,
            '중1': 4, '중2': 5, '중3': 6,
            '고1': 7, '고2': 8, '고3': 9
        };

        const eventData = {
            '왕복오래달리기': {
                '남': {
                    '초4': [19, 26, 45, 69, 96, 103],
                    '초5': [22, 29, 50, 73, 100, 107],
                    '초6': [22, 32, 54, 78, 104, 112],
                    '중1': [15, 20, 36, 50, 64, 73],
                    '중2': [15, 22, 38, 52, 66, 75],
                    '중3': [16, 24, 40, 54, 68, 79],
                    '고1': [16, 26, 42, 56, 70, 80],
                    '고2': [16, 28, 44, 58, 72, 81],
                    '고3': [18, 30, 46, 60, 74, 82],
                },
                '여': {
                    '초4': [16, 21, 40, 57, 77, 100],
                    '초5': [18, 23, 45, 63, 85, 104],
                    '초6': [20, 25, 50, 69, 93, 112],
                    '중1': [10, 14, 19, 25, 35, 70],
                    '중2': [10, 15, 21, 29, 40, 75],
                    '중3': [12, 16, 23, 33, 45, 80],
                    '고1': [13, 17, 25, 37, 50, 85],
                    '고2': [14, 18, 27, 41, 55, 90],
                    '고3': [14, 18, 27, 41, 55, 90],
                },
            },
            '오래달리기걷기': {
                '남': {
                    '초5': [480, 410, 325, 282, 268, 281],
                    '초6': [450, 380, 315, 251, 243, 250],
                    '중1': [700, 600, 503, 426, 400, 425],
                    '중2': [680, 584, 488, 417, 380, 416],
                    '중3': [660, 568, 473, 408, 370, 407],
                    '고1': [640, 552, 458, 399, 370, 398],
                    '고2': [620, 536, 443, 390, 370, 389],
                    '고3': [600, 520, 428, 381, 362, 380],
                },
                '여': {
                    '초5': [502, 442, 360, 300, 268, 299],
                    '초6': [480, 430, 354, 300, 243, 299],
                    '중1': [609, 518, 443, 380, 355, 379],
                    '중2': [609, 518, 443, 380, 355, 379],
                    '중3': [609, 518, 443, 380, 355, 379],
                    '고1': [609, 518, 443, 380, 365, 379],
                    '고2': [609, 518, 443, 380, 365, 379],
                    '고3': [609, 518, 443, 380, 365, 379],
                },
            },
            '스텝검사': {
                '남': {'all': [44.0, 47.0, 52.0, 62.0, 76.0, 95.0]},
                '여': {'all': [44.0, 47.0, 52.0, 62.0, 76.0, 95.0]},
            },
            '앉아윗몸앞으로굽히기': {
                '남': {
                    '초5': [-5.1, -4.0, 1.0, 5.0, 8.0, 18.0],
                    '초6': [-5.1, -4.0, 1.0, 5.0, 8.0, 18.0],
                    '중1': [-5.1, -4.0, 2.0, 6.0, 10.0, 25.0],
                    '중2': [-5.1, -4.0, 2.0, 7.0, 10.0, 25.0],
                    '중3': [-5.1, -3.0, 2.6, 7.0, 10.0, 25.0],
                    '고1': [-3.1, -2.0, 4.0, 9.0, 13.0, 28.0],
                    '고2': [-3.1, 0.1, 5.0, 11.0, 16.0, 28.0],
                    '고3': [-3.1, 0.1, 6.0, 11.0, 16.0, 28.0],
                },
                '여': {
                    '초5': [-0.1, 1.0, 5.0, 7.0, 10.0, 22.0],
                    '초6': [-0.1, 2.0, 5.0, 10.0, 14.0, 26.0],
                    '중1': [-0.1, 2.0, 8.0, 11.0, 15.0, 28.0],
                    '중2': [-0.1, 2.0, 8.0, 11.0, 15.0, 28.0],
                    '중3': [-0.1, 2.0, 8.0, 11.0, 16.0, 28.0],
                    '고1': [-0.1, 2.0, 8.0, 11.0, 16.0, 28.0],
                    '고2': [-0.1, 5.0, 9.0, 12.0, 17.0, 28.0],
                    '고3': [-0.1, 5.0, 9.0, 12.0, 17.0, 28.0],
                },
            },
            '종합유연성': {
                '남': {'all': [4, 5, 6, 7, 8]},
                '여': {'all': [4, 5, 6, 7, 8]},
            },
            '팔굽혀펴기': {
                '남': {
                    '중1': [0, 4, 12, 25, 34, 41],
                    '중2': [0, 4, 12, 25, 34, 41],
                    '중3': [0, 4, 14, 25, 34, 41],
                    '고1': [2, 7, 16, 30, 46, 50],
                    '고2': [7, 8, 25, 42, 50, 54],
                    '고3': [7, 17, 30, 46, 56, 62],
                },
                '여': {
                    '중1': [0, 6, 14, 24, 45, 50],
                    '중2': [0, 6, 14, 24, 40, 44],
                    '중3': [0, 6, 14, 24, 40, 44],
                    '고1': [0, 6, 14, 24, 40, 44],
                    '고2': [0, 9, 18, 30, 40, 44],
                    '고3': [0, 9, 18, 30, 40, 44],
                },
            },
            '윗몸말아올리기': {
                '남': {
                    '초4': [0, 7, 22, 40, 80, 120],
                    '초5': [0, 10, 22, 40, 80, 120],
                    '초6': [0, 10, 22, 40, 80, 120],
                    '중1': [5, 14, 33, 55, 90, 130],
                    '중2': [5, 14, 33, 55, 90, 130],
                    '중3': [5, 14, 33, 55, 90, 130],
                    '고1': [8, 15, 35, 60, 90, 130],
                    '고2': [10, 17, 35, 60, 90, 130],
                    '고3': [10, 17, 35, 60, 90, 130],
                },
                '여': {
                    '초4': [0, 6, 18, 29, 60, 90],
                    '초5': [0, 7, 23, 36, 60, 90],
                    '초6': [0, 7, 23, 43, 60, 90],
                    '중1': [0, 7, 22, 43, 58, 62],
                    '중2': [0, 7, 19, 39, 58, 62],
                    '중3': [0, 6, 17, 34, 52, 60],
                    '고1': [0, 4, 13, 30, 40, 50],
                    '고2': [0, 4, 13, 30, 40, 50],
                    '고3': [0, 4, 13, 30, 40, 50],
                },
            },
            '악력': {
                '남': {
                    '초4': [8.9, 11.5, 15.0, 18.5, 31.0, 36.0],
                    '초5': [9.9, 12.5, 17.0, 23.0, 31.0, 37.0],
                    '초6': [11.2, 15.0, 19.0, 26.5, 35.0, 39.4],
                    '중1': [14.4, 16.5, 22.5, 30.0, 42.0, 46.0],
                    '중2': [19.1, 22.0, 28.5, 37.0, 44.5, 47.0],
                    '중3': [19.1, 25.0, 33.0, 40.5, 48.5, 50.0],
                    '고1': [25.5, 29.0, 35.5, 42.5, 61.0, 62.5],
                    '고2': [28.5, 31.0, 39.0, 46.0, 61.0, 65.0],
                    '고3': [30.5, 31.0, 39.0, 46.0, 63.5, 68.4],
                },
                '여': {
                    '초4': [8.5, 10.5, 13.5, 18.0, 29.0, 33.6],
                    '초5': [10.6, 12.0, 15.5, 19.0, 29.0, 35.0],
                    '초6': [10.0, 14.0, 19.0, 22.0, 33.0, 39.0],
                    '중1': [11.9, 14.0, 19.0, 23.0, 36.0, 38.0],
                    '중2': [13.0, 14.0, 19.5, 25.5, 36.0, 38.0],
                    '중3': [14.9, 16.0, 19.5, 27.5, 36.0, 38.0],
                    '고1': [16.0, 16.5, 23.0, 29.0, 36.0, 38.0],
                    '고2': [17.6, 18.0, 25.0, 29.5, 37.5, 38.2],
                    '고3': [17.6, 18.0, 25.0, 29.5, 37.5, 38.2],
                },
            },
            '50m달리기': {
                '남': {
                    '초4': [13.21, 10.51, 9.71, 8.81, 8.70, 8.80],
                    '초5': [13.21, 10.21, 9.41, 8.51, 8.30, 8.50],
                    '초6': [12.51, 10.01, 9.11, 8.11, 7.77, 8.10],
                    '중1': [11.51, 9.31, 8.41, 7.51, 7.40, 7.50],
                    '중2': [11.51, 9.01, 8.21, 7.31, 7.11, 7.30],
                    '중3': [11.01, 8.51, 7.81, 7.01, 6.80, 7.00],
                    '고1': [10.74, 8.11, 7.61, 7.01, 6.80, 7.00],
                    '고2': [9.71, 7.91, 7.51, 6.71, 6.50, 6.70],
                    '고3': [9.61, 7.91, 7.51, 6.71, 6.40, 6.70],
                },
                '여': {
                    '초4': [13.31, 11.01, 10.41, 9.41, 9.30, 9.40],
                    '초5': [13.31, 10.71, 9.91, 8.91, 8.73, 8.90],
                    '초6': [12.91, 10.71, 9.81, 8.91, 8.66, 8.90],
                    '중1': [12.21, 10.51, 9.81, 8.81, 8.60, 8.80],
                    '중2': [12.21, 10.51, 9.81, 8.81, 8.60, 8.80],
                    '중3': [12.21, 10.51, 9.81, 8.81, 8.60, 8.80],
                    '고1': [12.21, 10.51, 9.81, 8.81, 8.60, 8.80],
                    '고2': [12.21, 10.51, 9.51, 8.81, 8.60, 8.80],
                    '고3': [12.21, 10.51, 9.51, 8.81, 8.60, 8.80],
                },
            },
            '제자리멀리뛰기': {
                '남': {
                    '초4': [98.2, 100.1, 130.1, 149.1, 170.1, 179.4],
                    '초5': [105.6, 111, 141.1, 159.1, 180.1, 187.4],
                    '초6': [112.0, 122.1, 148.1, 167.1, 200.1, 204.7],
                    '중1': [122.9, 131.1, 159.1, 177.1, 211.1, 219.7],
                    '중2': [129.9, 136.1, 169.1, 187.1, 218.1, 229.3],
                    '중3': [141.4, 145.1, 180.1, 201.1, 238.1, 244.0],
                    '고1': [139.9, 160.1, 195.1, 216.1, 255.1, 260.2],
                    '고2': [162.9, 177.1, 212.1, 228.1, 258.1, 270.0],
                    '고3': [169.9, 185.1, 221.1, 243.1, 264.1, 277.1],
                },
                '여': {
                    '초4': [87.4, 97.1, 119.1, 135.1, 161.1, 165.5],
                    '초5': [89.3, 100.1, 123.1, 139.1, 170.1, 175.0],
                    '초6': [89.9, 100.1, 127.1, 144.1, 175.1, 177.8],
                    '중1': [89.9, 100.1, 127.1, 144.1, 175.1, 180.5],
                    '중2': [93.9, 100.1, 127.1, 145.1, 183.1, 198.0],
                    '중3': [94.9, 100.1, 127.1, 145.1, 183.1, 198.0],
                    '고1': [94.9, 100.1, 139.1, 159.1, 186.1, 200.0],
                    '고2': [94.9, 100.1, 139.1, 159.1, 186.1, 200.0],
                    '고3': [94.9, 100.1, 139.1, 159.1, 186.1, 200.0],
                },
            },
            'BMI': {
                '남': {
                    '초4': [14.2, 14.3, 20.8, 23.3, 30.0],
                    '초5': [14.5, 14.6, 21.7, 24.5, 30.0],
                    '초6': [14.8, 14.9, 22.6, 25.0, 30.0],
                    '중1': [15.3, 15.4, 23.3, 25.0, 30.0],
                    '중2': [15.7, 15.8, 23.9, 25.0, 30.0],
                    '중3': [16.2, 16.3, 24.4, 25.0, 30.0],
                    '고1': [16.7, 16.8, 24.7, 25.0, 30.0],
                    '고2': [17.2, 17.3, 25.0, 30.0],
                    '고3': [17.7, 17.8, 25.0, 30.0],
                },
                '여': {
                    '초4': [13.9, 14.0, 19.9, 22.1, 30.0],
                    '초5': [14.2, 14.3, 20.7, 23.1, 30.0],
                    '초6': [14.6, 14.7, 21.5, 24.0, 30.0],
                    '중1': [15.1, 15.2, 22.2, 24.8, 30.0],
                    '중2': [15.6, 15.7, 22.8, 25.0, 30.0],
                    '중3': [16.2, 16.3, 23.3, 25.0, 30.0],
                    '고1': [16.7, 16.8, 23.7, 25.0, 30.0],
                    '고2': [17.2, 17.3, 23.9, 25.0, 30.0],
                    '고3': [17.6, 17.7, 24.0, 25.0, 30.0],
                },
            },
        };

        const eventElementData = {
            'BMI': { placeholder: '키(cm)/몸무게(kg)', inputType: 'text', disabled: false },
            '오래달리기걷기': { placeholder: '기록(초)을 입력하세요', inputType: 'number', disabled: false },
            '50m달리기': { placeholder: '기록(초)을 입력하세요', inputType: 'number', disabled: false },
            '스텝검사': { placeholder: 'PEI 점수를 입력하세요', inputType: 'number', disabled: false },
            '앉아윗몸앞으로굽히기': { placeholder: '기록(cm)을 입력하세요', inputType: 'number', disabled: false },
            '종합유연성': { placeholder: '점수(4~8)를 입력하세요', inputType: 'number', disabled: false },
            '팔굽혀펴기': { placeholder: '기록(회)를 입력하세요', inputType: 'number', disabled: false },
            '윗몸말아올리기': { placeholder: '기록(회)를 입력하세요', inputType: 'number', disabled: false },
            '악력': { placeholder: '기록(kg)을 입력하세요', inputType: 'number', disabled: false },
            '제자리멀리뛰기': { placeholder: '기록(cm)을 입력하세요', inputType: 'number', disabled: false },
            '왕복오래달리기': { placeholder: '기록(회)를 입력하세요', inputType: 'number', disabled: false },
        };

        const calculateBtn = document.getElementById('calculateBtn');
        const eventSelect = document.getElementById('event');
        const recordInputContainer = document.getElementById('recordInputContainer');
        const resultContainer = document.getElementById('resultContainer');
        const resultText = document.getElementById('resultText');
        const modal = document.getElementById('modal');
        const modalMessage = document.getElementById('modalMessage');
        const closeModalBtn = document.getElementById('closeModal');

        const grades = ['1등급', '2등급', '3등급', '4등급', '5등급'];
        const bmiGrades = ['마름', '정상', '과체중', '경도비만', '고도비만'];

        function showModal(message) {
            modalMessage.textContent = message;
            modal.classList.remove('hidden');
        }

        function getGrade(event, gender, grade, record) {
            const data = eventData[event][gender];
            const eventGrades = data[grade] || data['all'];

            if (event === 'BMI') {
                if (record <= eventGrades[0]) return '마름';
                if (record <= eventGrades[1]) return '정상';
                if (record <= eventGrades[2]) return '과체중';
                if (record <= eventGrades[3]) return '경도비만';
                return '고도비만';
            }

            if (event === '50m달리기' || event === '오래달리기걷기') {
                 if (record <= eventGrades[4]) return '아주 높음(1등급)';
                 if (record <= eventGrades[3]) return '높음(2등급)';
                 if (record <= eventGrades[2]) return '보통(3등급)';
                 if (record <= eventGrades[1]) return '낮음(4등급)';
                 return '아주 낮음(5등급)';
            }
            
            if (event === '앉아윗몸앞으로굽히기' || event === '종합유연성' || event === '제자리멀리뛰기' || event === '악력' || event === '윗몸말아올리기' || event === '왕복오래달리기' || event === '팔굽혀펴기' || event === '스텝검사' ) {
                if (record >= eventGrades[4]) return '아주 높음(1등급)';
                if (record >= eventGrades[3]) return '높음(2등급)';
                if (record >= eventGrades[2]) return '보통(3등급)';
                if (record >= eventGrades[1]) return '낮음(4등급)';
                return '아주 낮음(5등급)';
            }
        }

        function updateRecordInput() {
            const selectedEvent = eventSelect.value;
            const eventInfo = eventElementData[selectedEvent];
            
            let inputElement;
            if (selectedEvent === 'BMI') {
                inputElement = `<input type="text" id="record" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border-2" placeholder="${eventInfo.placeholder}">`;
            } else {
                inputElement = `<input type="number" id="record" step="0.01" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2 border-2" placeholder="${eventInfo.placeholder}">`;
            }

            const inputHtml = `
                <label for="record" class="block text-sm font-medium text-gray-700 mb-1">기록 입력</label>
                ${inputElement}
            `;
            recordInputContainer.innerHTML = inputHtml;
        }

        calculateBtn.addEventListener('click', () => {
            const grade = document.getElementById('grade').value;
            const gender = document.getElementById('gender').value;
            const event = document.getElementById('event').value;
            const recordInput = document.getElementById('record');
            let record;

            if (event === 'BMI') {
                const bmiRecord = recordInput.value.split('/').map(val => parseFloat(val.trim()));
                if (bmiRecord.length !== 2 || isNaN(bmiRecord[0]) || isNaN(bmiRecord[1])) {
                    showModal('키(cm)/몸무게(kg) 형식으로 입력해주세요.');
                    return;
                }
                const heightM = bmiRecord[0] / 100;
                record = bmiRecord[1] / (heightM * heightM);
            } else {
                record = parseFloat(recordInput.value);
            }
            
            if (isNaN(record)) {
                showModal('기록을 정확히 입력해주세요.');
                return;
            }

            const result = getGrade(event, gender, grade, record);

            if (result) {
                resultText.textContent = `결과: ${result}`;
                resultContainer.classList.remove('hidden');
            } else {
                showModal('해당하는 기록에 대한 등급을 찾을 수 없습니다.');
            }
        });

        eventSelect.addEventListener('change', updateRecordInput);
        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        // Initialize input state
        window.onload = updateRecordInput;
    </script>
</body>
</html>
